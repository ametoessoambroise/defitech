<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />
    <title>CareerCraft - Générateur de CV IA</title>
    <meta name="csrf-token" content="{{ csrf_token() }}" />
    <link
      rel="shortcut icon"
      href="https://res.cloudinary.com/dmokvhpjt/image/upload/v1766894416/bijcryrbjli0daglbsim.png"
      type="image/x-icon"
    />

    <script src="https://cdn.tailwindcss.com"></script>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
    />

    <style>
      * {
        -webkit-tap-highlight-color: transparent;
      }

      body {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
          "Helvetica Neue", Arial, sans-serif;
        overscroll-behavior: none;
        touch-action: manipulation;
      }

      /* iOS Safe Areas */
      @supports (padding: max(0px)) {
        .safe-top {
          padding-top: max(env(safe-area-inset-top), 0px);
        }
        .safe-bottom {
          padding-bottom: max(env(safe-area-inset-bottom), 0px);
        }
      }

      /* Smooth Animations */
      @keyframes slideUp {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
        }
        to {
          opacity: 1;
        }
      }

      .animate-slide-up {
        animation: slideUp 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      }

      .animate-fade-in {
        animation: fadeIn 0.2s ease-out;
      }

      /* Custom Scrollbar */
      .custom-scrollbar::-webkit-scrollbar {
        width: 3px;
      }

      .custom-scrollbar::-webkit-scrollbar-track {
        background: transparent;
      }

      .custom-scrollbar::-webkit-scrollbar-thumb {
        background: #cbd5e1;
        border-radius: 3px;
      }

      /* iOS Momentum Scrolling */
      .ios-scroll {
        -webkit-overflow-scrolling: touch;
      }

      /* Touch Feedback */
      .touch-active:active {
        transform: scale(0.97);
        transition: transform 0.1s ease;
      }

      /* Backdrop Blur Support */
      @supports (backdrop-filter: blur(10px)) {
        .backdrop-blur-ios {
          backdrop-filter: blur(10px);
          -webkit-backdrop-filter: blur(10px);
        }
      }

      /* Floating Button */
      #defaiBtn {
        transition: transform 0.2s ease, box-shadow 0.2s ease;
      }

      #defaiBtn:active {
        transform: scale(0.95);
      }

      /* Loading Spinner */
      @keyframes spin {
        to {
          transform: rotate(360deg);
        }
      }

      .animate-spin {
        animation: spin 1s linear infinite;
      }

      /* Bottom Sheet */
      .bottom-sheet {
        transform: translateY(100%);
        transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      }

      .bottom-sheet.active {
        transform: translateY(0);
      }

      /* Modal Overlay */
      .modal-overlay {
        opacity: 0;
        transition: opacity 0.3s ease;
      }

      .modal-overlay.active {
        opacity: 1;
      }
    </style>
  </head>

  <body class="bg-gray-50">
    <!-- Header -->
    <header
      class="bg-white border-b border-gray-100 sticky top-0 z-40 safe-top"
    >
      <div class="px-4 py-3 sm:px-6 sm:py-4">
        <div class="flex items-center justify-between">
          <div class="flex items-center gap-3">
            <img
              src="https://res.cloudinary.com/dmokvhpjt/image/upload/v1766894504/dl6awojzn5wcjheacxbf.png"
              alt="logo"
              class="w-10 h-10 rounded-full object-cover"
            />
            <div>
              <h1 class="text-lg font-semibold text-gray-900">CareerCraft</h1>
              <p class="text-xs text-gray-500">Générateur CV IA</p>
            </div>
          </div>

          <button
            onclick="window.history.back()"
            class="flex items-center gap-2 px-3 py-2 text-sm font-medium text-gray-700 bg-gray-50 rounded-lg active:bg-gray-100 transition-colors touch-active min-h-[44px]"
          >
            <i class="fas fa-arrow-left text-xs"></i>
            <span class="hidden sm:inline">Retour</span>
          </button>
        </div>
      </div>
    </header>

    <!-- Main Content -->
    <main class="pb-32 lg:pb-8">
      <div class="max-w-7xl mx-auto px-4 py-4 sm:px-6 lg:px-8">
        <div class="lg:grid lg:grid-cols-12 lg:gap-6">
          <!-- Desktop Sidebar -->
          <aside class="hidden lg:block lg:col-span-3 space-y-4">
            <!-- Template Selection -->
            <div class="bg-white rounded-lg p-4 border border-gray-100">
              <h2 class="text-sm font-semibold text-gray-900 mb-3">Modèle</h2>
              <select
                id="templateSelectDesktop"
                class="w-full px-3 py-2 text-sm bg-gray-50 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
              >
                <option value="modern">Moderne</option>
                <option value="classic">Classique</option>
                <option value="creative">Créatif</option>
              </select>
            </div>

            <!-- Stats -->
            <div class="bg-white rounded-lg p-4 border border-gray-100">
              <h2 class="text-sm font-semibold text-gray-900 mb-3">
                Statistiques
              </h2>
              <div class="space-y-2">
                <div class="flex items-center justify-between">
                  <span class="text-sm text-gray-600">Expériences</span>
                  <span
                    id="expCount"
                    class="text-sm font-semibold text-gray-900"
                    >0</span
                  >
                </div>
                <div class="flex items-center justify-between">
                  <span class="text-sm text-gray-600">Formations</span>
                  <span
                    id="eduCount"
                    class="text-sm font-semibold text-gray-900"
                    >0</span
                  >
                </div>
                <div class="flex items-center justify-between">
                  <span class="text-sm text-gray-600">Compétences</span>
                  <span
                    id="skillsCount"
                    class="text-sm font-semibold text-gray-900"
                    >0</span
                  >
                </div>
              </div>
            </div>

            <!-- Export -->
            <div class="bg-white rounded-lg p-4 border border-gray-100">
              <h2 class="text-sm font-semibold text-gray-900 mb-3">Exporter</h2>
              <div class="space-y-2">
                <button
                  id="exportPdfDesktop"
                  class="w-full flex items-center justify-center gap-2 px-4 py-2.5 text-sm font-medium text-white bg-red-500 rounded-lg hover:bg-red-600 active:bg-red-700 transition-colors touch-active"
                >
                  <i class="fas fa-file-pdf"></i>
                  <span>PDF</span>
                </button>
                <button
                  id="exportDocxDesktop"
                  class="w-full flex items-center justify-center gap-2 px-4 py-2.5 text-sm font-medium text-white bg-blue-500 rounded-lg hover:bg-blue-600 active:bg-blue-700 transition-colors touch-active"
                >
                  <i class="fas fa-file-word"></i>
                  <span>Word</span>
                </button>
                <button
                  id="exportLinkedInDesktop"
                  class="w-full flex items-center justify-center gap-2 px-4 py-2.5 text-sm font-medium text-white bg-blue-700 rounded-lg hover:bg-blue-800 active:bg-blue-900 transition-colors touch-active"
                >
                  <i class="fab fa-linkedin"></i>
                  <span>LinkedIn</span>
                </button>
              </div>
            </div>
          </aside>

          <!-- CV Preview -->
          <div class="lg:col-span-9">
            <!-- Mobile Template Selector -->
            <div class="lg:hidden mb-4">
              <label class="block text-xs font-medium text-gray-700 mb-2"
                >Modèle de CV</label
              >
              <select
                id="templateSelect"
                class="w-full px-3 py-2.5 text-sm bg-white border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent min-h-[44px]"
              >
                <option value="modern">Moderne</option>
                <option value="classic">Classique</option>
                <option value="creative">Créatif</option>
              </select>
            </div>

            <div
              class="bg-white rounded-lg border border-gray-100 overflow-hidden"
            >
              <!-- Preview Header -->
              <div
                class="flex items-center justify-between px-4 py-3 border-b border-gray-100"
              >
                <h2 class="text-base font-semibold text-gray-900">Aperçu</h2>
                <button
                  id="refreshPreview"
                  class="flex items-center gap-2 px-3 py-2 text-sm font-medium text-blue-600 bg-blue-50 rounded-lg active:bg-blue-100 transition-colors touch-active min-h-[44px]"
                >
                  <i class="fas fa-sync-alt text-xs"></i>
                  <span>Actualiser</span>
                </button>
              </div>

              <!-- Preview Content -->
              <div
                class="p-4 lg:p-6 custom-scrollbar overflow-y-auto ios-scroll"
                style="max-height: calc(100vh - 280px)"
              >
                <div
                  id="cvPreview"
                  class="bg-gray-50 rounded-lg min-h-[400px] lg:min-h-[600px]"
                >
                  <!-- Empty State -->
                  <div
                    class="flex flex-col items-center justify-center h-full py-20 px-4 text-center"
                  >
                    <div
                      class="w-16 h-16 mb-4 rounded-full bg-gray-100 flex items-center justify-center"
                    >
                      <i class="fas fa-file-alt text-2xl text-gray-400"></i>
                    </div>
                    <p class="text-base font-medium text-gray-900 mb-1">
                      Votre CV s'affichera ici
                    </p>
                    <p class="text-sm text-gray-500">
                      Cliquez sur Actualiser pour générer l'aperçu
                    </p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </main>

    <!-- Mobile Bottom Bar -->
    <div
      class="lg:hidden fixed bottom-0 left-0 right-0 bg-white border-t border-gray-100 z-30 safe-bottom backdrop-blur-ios bg-opacity-95"
    >
      <div class="px-4 py-3">
        <div class="grid grid-cols-3 gap-2">
          <button
            id="exportPdf"
            class="flex flex-col items-center justify-center gap-1 py-2.5 text-red-500 bg-red-50 rounded-lg active:bg-red-100 transition-colors touch-active min-h-[56px]"
          >
            <i class="fas fa-file-pdf text-lg"></i>
            <span class="text-xs font-medium">PDF</span>
          </button>
          <button
            id="exportDocx"
            class="flex flex-col items-center justify-center gap-1 py-2.5 text-blue-500 bg-blue-50 rounded-lg active:bg-blue-100 transition-colors touch-active min-h-[56px]"
          >
            <i class="fas fa-file-word text-lg"></i>
            <span class="text-xs font-medium">Word</span>
          </button>
          <button
            id="exportLinkedIn"
            class="flex flex-col items-center justify-center gap-1 py-2.5 text-blue-700 bg-blue-50 rounded-lg active:bg-blue-100 transition-colors touch-active min-h-[56px]"
          >
            <i class="fab fa-linkedin text-lg"></i>
            <span class="text-xs font-medium">LinkedIn</span>
          </button>
        </div>
      </div>
    </div>

    <!-- Mobile Stats Button -->
    <button
      id="showDataModal"
      class="lg:hidden fixed right-4 bottom-24 w-14 h-14 bg-blue-600 text-white rounded-full shadow-lg flex items-center justify-center z-20 touch-active"
    >
      <i class="fas fa-chart-bar text-lg"></i>
    </button>

    <!-- Stats Modal -->
    <div id="dataModal" class="hidden fixed inset-0 z-50 lg:hidden">
      <div
        class="modal-overlay absolute inset-0 bg-black bg-opacity-50"
        id="modalOverlay"
      ></div>
      <div
        class="bottom-sheet absolute bottom-0 left-0 right-0 bg-white rounded-t-2xl safe-bottom"
      >
        <div class="px-4 py-5">
          <div class="flex items-center justify-between mb-4">
            <h2 class="text-lg font-semibold text-gray-900">Statistiques</h2>
            <button
              id="closeDataModal"
              class="w-10 h-10 flex items-center justify-center rounded-full bg-gray-100 active:bg-gray-200 transition-colors touch-active"
            >
              <i class="fas fa-times text-gray-600"></i>
            </button>
          </div>
          <div class="space-y-3">
            <div
              class="flex items-center justify-between py-3 border-b border-gray-100"
            >
              <span class="text-sm text-gray-600">Expériences</span>
              <span
                id="expCountMobile"
                class="text-base font-semibold text-gray-900"
                >0</span
              >
            </div>
            <div
              class="flex items-center justify-between py-3 border-b border-gray-100"
            >
              <span class="text-sm text-gray-600">Formations</span>
              <span
                id="eduCountMobile"
                class="text-base font-semibold text-gray-900"
                >0</span
              >
            </div>
            <div class="flex items-center justify-between py-3">
              <span class="text-sm text-gray-600">Compétences</span>
              <span
                id="skillsCountMobile"
                class="text-base font-semibold text-gray-900"
                >0</span
              >
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Loading Overlay -->
    <div
      id="loadingOverlay"
      class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"
    >
      <div
        class="bg-white p-6 rounded-2xl shadow-2xl text-center mx-4 max-w-xs animate-fade-in"
      >
        <div
          class="w-12 h-12 border-4 border-gray-200 border-t-blue-600 rounded-full animate-spin mx-auto mb-4"
        ></div>
        <p id="loadingText" class="text-sm font-medium text-gray-900">
          Génération en cours...
        </p>
      </div>
    </div>

    <!-- Toast -->
    <div
      id="toast"
      class="hidden fixed top-4 left-4 right-4 sm:left-1/2 sm:-translate-x-1/2 sm:max-w-sm bg-gray-900 text-white px-4 py-3 rounded-lg shadow-lg z-50 animate-slide-up"
    >
      <div class="flex items-center gap-2">
        <i id="toastIcon" class="fas fa-check-circle"></i>
        <span id="toastMessage" class="text-sm font-medium"
          >Action réussie</span
        >
      </div>
    </div>

    <!-- Floating Assistant Button -->
    <button
      id="defaiBtn"
      onclick="window.location.href='/defAI'"
      title="Defai Votre Assistant"
      class="w-14 h-14 rounded-full fixed bottom-4 right-4 shadow-xl z-50 outline-none"
    >
      <img
        src="https://res.cloudinary.com/dmokvhpjt/image/upload/v1766894468/gep1294qd7tbddgvtmpj.png"
        alt="logo"
        class="w-full h-full rounded-full"
      />
    </button>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        // DOM Elements
        const elements = {
          exportPdf: document.getElementById("exportPdf"),
          exportDocx: document.getElementById("exportDocx"),
          exportLinkedIn: document.getElementById("exportLinkedIn"),
          exportPdfDesktop: document.getElementById("exportPdfDesktop"),
          exportDocxDesktop: document.getElementById("exportDocxDesktop"),
          exportLinkedInDesktop: document.getElementById(
            "exportLinkedInDesktop"
          ),
          refreshPreview: document.getElementById("refreshPreview"),
          templateSelect: document.getElementById("templateSelect"),
          templateSelectDesktop: document.getElementById(
            "templateSelectDesktop"
          ),
          loadingOverlay: document.getElementById("loadingOverlay"),
          loadingText: document.getElementById("loadingText"),
          cvPreview: document.getElementById("cvPreview"),
          showDataModal: document.getElementById("showDataModal"),
          closeDataModal: document.getElementById("closeDataModal"),
          dataModal: document.getElementById("dataModal"),
          modalOverlay: document.getElementById("modalOverlay"),
          toast: document.getElementById("toast"),
          toastMessage: document.getElementById("toastMessage"),
          toastIcon: document.getElementById("toastIcon"),
          defaiBtn: document.getElementById("defaiBtn"),
        };

        // Draggable Assistant Button
        let dragging = false;
        let offsetX = 0;
        let offsetY = 0;

        function startDrag(x, y) {
          dragging = true;
          offsetX = x - elements.defaiBtn.offsetLeft;
          offsetY = y - elements.defaiBtn.offsetTop;
          elements.defaiBtn.style.transition = "none";
        }

        function moveDrag(x, y) {
          if (!dragging) return;
          elements.defaiBtn.style.left = `${x - offsetX}px`;
          elements.defaiBtn.style.top = `${y - offsetY}px`;
        }

        function endDrag() {
          if (!dragging) return;
          dragging = false;
          elements.defaiBtn.style.transition = "all 0.2s ease";
          snapToCorner();
        }

        function snapToCorner() {
          const vw = window.innerWidth;
          const vh = window.innerHeight;
          const bw = elements.defaiBtn.offsetWidth;
          const bh = elements.defaiBtn.offsetHeight;
          const x = elements.defaiBtn.offsetLeft;
          const y = elements.defaiBtn.offsetTop;

          const corners = {
            tl: Math.hypot(x, y),
            tr: Math.hypot(vw - x - bw, y),
            bl: Math.hypot(x, vh - y - bh),
            br: Math.hypot(vw - x - bw, vh - y - bh),
          };

          const nearest = Object.entries(corners).sort(
            (a, b) => a[1] - b[1]
          )[0][0];
          const margin = 16;

          const positions = {
            tl: { left: `${margin}px`, top: `${margin}px` },
            tr: { left: `${vw - bw - margin}px`, top: `${margin}px` },
            bl: { left: `${margin}px`, top: `${vh - bh - margin}px` },
            br: { left: `${vw - bw - margin}px`, top: `${vh - bh - margin}px` },
          };

          Object.assign(elements.defaiBtn.style, positions[nearest]);
        }

        // Mouse events
        elements.defaiBtn.addEventListener("mousedown", (e) =>
          startDrag(e.clientX, e.clientY)
        );
        document.addEventListener("mousemove", (e) =>
          moveDrag(e.clientX, e.clientY)
        );
        document.addEventListener("mouseup", endDrag);

        // Touch events
        elements.defaiBtn.addEventListener("touchstart", (e) => {
          const t = e.touches[0];
          startDrag(t.clientX, t.clientY);
        });
        document.addEventListener("touchmove", (e) => {
          const t = e.touches[0];
          moveDrag(t.clientX, t.clientY);
        });
        document.addEventListener("touchend", endDrag);

        // Template Sync
        if (elements.templateSelect && elements.templateSelectDesktop) {
          elements.templateSelect.addEventListener("change", function () {
            elements.templateSelectDesktop.value = this.value;
          });
          elements.templateSelectDesktop.addEventListener(
            "change",
            function () {
              elements.templateSelect.value = this.value;
            }
          );
        }

        // Modal Handlers
        function showModal() {
          elements.dataModal.classList.remove("hidden");
          setTimeout(() => {
            elements.modalOverlay.classList.add("active");
            elements.dataModal
              .querySelector(".bottom-sheet")
              .classList.add("active");
          }, 10);
        }

        function hideModal() {
          elements.modalOverlay.classList.remove("active");
          elements.dataModal
            .querySelector(".bottom-sheet")
            .classList.remove("active");
          setTimeout(() => {
            elements.dataModal.classList.add("hidden");
          }, 300);
        }

        elements.showDataModal?.addEventListener("click", showModal);
        elements.closeDataModal?.addEventListener("click", hideModal);
        elements.modalOverlay?.addEventListener("click", hideModal);

        // Utility Functions
        function getCSRFToken() {
          const token = document.querySelector('meta[name="csrf-token"]');
          return token ? token.getAttribute("content") : "";
        }

        function showLoading(message = "Traitement en cours...") {
          elements.loadingText.textContent = message;
          elements.loadingOverlay.classList.remove("hidden");
        }

        function hideLoading() {
          elements.loadingOverlay.classList.add("hidden");
        }

        function showToast(message, type = "success") {
          elements.toastMessage.textContent = message;

          if (type === "error") {
            elements.toast.classList.remove("bg-gray-900");
            elements.toast.classList.add("bg-red-500");
            elements.toastIcon.className = "fas fa-exclamation-circle";
          } else {
            elements.toast.classList.remove("bg-red-500");
            elements.toast.classList.add("bg-gray-900");
            elements.toastIcon.className = "fas fa-check-circle";
          }

          elements.toast.classList.remove("hidden");

          setTimeout(() => {
            elements.toast.style.opacity = "0";
            setTimeout(() => {
              elements.toast.classList.add("hidden");
              elements.toast.style.opacity = "1";
            }, 300);
          }, 3000);
        }

        // API Functions
        async function updateDataCounts() {
          try {
            const response = await fetch("/api/career-craft/preview", {
              method: "POST",
              headers: {
                "Content-Type": "application/json",
                "X-CSRFToken": getCSRFToken(),
              },
              credentials: "same-origin",
            });

            if (!response.ok)
              throw new Error("Erreur lors de la récupération des données");

            const data = await response.json();
            if (data.success && data.data) {
              const counts = {
                exp: data.data.experiences?.length || 0,
                edu: data.data.formations?.length || 0,
                skills:
                  (data.data.competences?.length || 0) +
                  (data.data.competences_techniques?.length || 0),
              };

              document.getElementById("expCount").textContent = counts.exp;
              document.getElementById("eduCount").textContent = counts.edu;
              document.getElementById("skillsCount").textContent =
                counts.skills;

              const expCountMobile = document.getElementById("expCountMobile");
              const eduCountMobile = document.getElementById("eduCountMobile");
              const skillsCountMobile =
                document.getElementById("skillsCountMobile");

              if (expCountMobile) expCountMobile.textContent = counts.exp;
              if (eduCountMobile) eduCountMobile.textContent = counts.edu;
              if (skillsCountMobile)
                skillsCountMobile.textContent = counts.skills;
            }
          } catch (error) {
            console.error("Erreur:", error);
          }
        }

        async function generatePreview() {
          showLoading("Génération de l'aperçu...");
          const template =
            elements.templateSelect?.value ||
            elements.templateSelectDesktop.value;

          try {
            const response = await fetch("/api/career-craft/generate", {
              method: "POST",
              headers: {
                "Content-Type": "application/json",
                "X-CSRFToken": getCSRFToken(),
              },
              body: JSON.stringify({ format: "preview", template }),
              credentials: "same-origin",
            });

            if (!response.ok) throw new Error("Erreur lors de la génération");

            const data = await response.json();
            if (data.success && data.preview) {
              elements.cvPreview.innerHTML = data.preview;
              showToast("Aperçu généré avec succès");
            }
          } catch (error) {
            console.error("Erreur:", error);
            showToast("Erreur lors de la génération", "error");
          } finally {
            hideLoading();
          }
        }

        async function exportCV(format) {
          showLoading(`Génération du ${format.toUpperCase()}...`);
          const template =
            elements.templateSelect?.value ||
            elements.templateSelectDesktop.value;

          try {
            const response = await fetch("/api/career-craft/generate", {
              method: "POST",
              headers: {
                "Content-Type": "application/json",
                "X-CSRFToken": getCSRFToken(),
              },
              body: JSON.stringify({ format, template }),
              credentials: "same-origin",
            });

            if (!response.ok) throw new Error(`Erreur lors de la génération`);

            if (format === "linkedin") {
              const data = await response.json();
              if (data.success && data.url) {
                window.open(data.url, "_blank");
                showToast("CV LinkedIn généré");
              }
            } else {
              const blob = await response.blob();
              const url = window.URL.createObjectURL(blob);
              const a = document.createElement("a");
              a.href = url;
              a.download = `mon_cv.${format}`;
              document.body.appendChild(a);
              a.click();
              window.URL.revokeObjectURL(url);
              a.remove();
              showToast(`CV ${format.toUpperCase()} téléchargé`);
            }
          } catch (error) {
            console.error("Erreur:", error);
            showToast(`Erreur lors de l'export`, "error");
          } finally {
            hideLoading();
          }
        }

        // Event Listeners
        elements.refreshPreview.addEventListener("click", generatePreview);

        // Mobile buttons
        elements.exportPdf?.addEventListener("click", () => exportCV("pdf"));
        elements.exportDocx?.addEventListener("click", () => exportCV("docx"));
        elements.exportLinkedIn?.addEventListener("click", () =>
          exportCV("linkedin")
        );

        // Desktop buttons
        elements.exportPdfDesktop?.addEventListener("click", () =>
          exportCV("pdf")
        );
        elements.exportDocxDesktop?.addEventListener("click", () =>
          exportCV("docx")
        );
        elements.exportLinkedInDesktop?.addEventListener("click", () =>
          exportCV("linkedin")
        );

        // Initial load
        updateDataCounts();
      });
    </script>
  </body>
</html>
